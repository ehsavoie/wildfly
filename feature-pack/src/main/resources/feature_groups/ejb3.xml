<?xml version="1.0" encoding="UTF-8"?>
<feature-group-spec name="ejb3" xmlns="urn:wildfly:pm-feature-group:1.0">
    <feature spec="subsystem.ejb3">
        <param name="default-slsb-instance-pool" value="slsb-strict-max-pool"/>
        <param name="default-sfsb-cache" value="simple"/>
        <param name="default-sfsb-passivation-disabled-cache" value="simple"/>
        <param name="default-security-domain" value="other"/>
        <feature spec="subsystem.ejb3.cache">
            <param name="cache" value="simple"/>
        </feature>
        <feature spec="subsystem.ejb3.cache">
            <param name="cache" value="distributable"/>
            <param name="passivation-store" value="infinispan"/>
            <param name="aliases" value="[passivating,clustered]"/>
        </feature>
        <feature spec="subsystem.ejb3.strict-max-bean-instance-pool">
            <param name="strict-max-bean-instance-pool" value="mdb-strict-max-pool"/>
            <param name="derive-size" value="from-cpu-count"/>
        </feature>
        <feature spec="subsystem.ejb3.strict-max-bean-instance-pool">
            <param name="strict-max-bean-instance-pool" value="slsb-strict-max-pool"/>
            <param name="derive-size" value="from-worker-pools"/>
        </feature>
        <feature spec="subsystem.ejb3.passivation-store">
            <param name="passivation-store" value="infinispan"/>
        </feature>
        <feature spec="subsystem.ejb3.service.async"/>
        <feature spec="subsystem.ejb3.service.remote">
            <param name="connector-ref" value="http-remoting-connector"/>
            <feature spec="subsystem.ejb3.service.remote.channel-creation-options">
                <param name="channel-creation-options" value="MAX_OUTBOUND_MESSAGES"/>
                <param name="value" value="1234"/>
                <param name="type" value="remoting"/>
            </feature>
            <feature spec="subsystem.ejb3.service.remote.channel-creation-options">
                <param name="channel-creation-options" value="READ_TIMEOUT"/>
                <param name="value" value="${prop.remoting-connector.read.timeout:20}"/>
                <param name="type" value="xnio"/>
            </feature>
        </feature>
        <feature spec="subsystem.ejb3.service.timer-service">
            <param name="default-data-store" value="default-file-store"/>
            <param name="thread-pool-name" value="default"/>
            <feature spec="subsystem.ejb3.service.timer-service.file-data-store">
                <param name="file-data-store" value="default-file-store"/>
                <param name="path" value="timer-service-data" />
                <param name="relative-to" value="jboss.server.data.dir" />
            </feature>
        </feature>
        <feature spec="subsystem.ejb3.thread-pool">
            <param name="thread-pool" value="default"/>
            <param name="max-threads" value="10"/>
        </feature>
    </feature>
    <feature-pack dependency="org.wildfly.core:wildfly-core-feature-pack-new">
        <feature spec="subsystem.elytron">
            <feature spec="subsystem.elytron.simple-permission-mapper">
                <param name="simple-permission-mapper" value="default-permission-mapper" />
                <feature spec="subsystem.elytron.simple-permission-mapper_permission-mappings">
                    <param name="permission-mapping" value="{class-name=org.jboss.ejb.client.RemoteEJBPermission,module=org.jboss.ejb-client}"/>
                </feature>
            </feature>
        </feature>
    </feature-pack>
</feature-group-spec>
